<head>
    <meta charset="UTF-8">
    <title>App2 - Real time machine diagnostic</title>
    <link rel="stylesheet" type="text/css" href="../css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="../css/style.css">
    <link rel="shortcut icon" href="../images/favicon.ico">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Staatliches">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,700,800">

</head>
<body>

	<header class="header" class="clearfix" style="background-color:#e66f2e">
		<div class="top-horizontal-left" style="color:white">
		  SPART plant machine live status
		</div>
		<div class="top-horizontal-right" style="margin-right:0px!important;padding-top:5px!important">
		  <img src="../images/spart.png" style="width:85%">
		</div>
	</header>

	<!-- Preloader -->
	<div class="loading-div" id="loading-div">
		<div class="image-loading">
			<img src="../images/loader.gif">
		</div>
	</div>

	<!-- General div content -->
	<div class="general-div">

	    <div class="top-horizontal"></div>

		<div class="logout-button">
			<button type="button" class="btn btn-default btn-sm" onclick="Logout.logout()">
			  <img src="../images/logout.png"> Logout
			</button>
		</div>

	    <div class="modal-dialog" style="width:1020px;margin-top: -25px;height:60%">

	        <!--
			################################################################################
			################################  MACHINE 1 ####################################
			################################################################################
			-->
	        <div class="row" style="padding-top: 20px;margin-left:-120px">

	            <!-- ###########################################
	            #################### LOGO V/X ################## -->
	            <!--<div class="col-md-3" style="padding-top:40px">
	                <div class="modal-content" style="background-color:#66bb6a;height: 150px!important; width:150px">
	                    <img src="../images/v.png" style="padding-left:30px;padding-top:35px;width:80%">
	                </div>
	            </div>-->
				<div class="col-md-3" style="padding-top:40px">
					<div class="modal-content" style="height: 150px!important; width:150px;background-color:#F1F1F1">
						<div id="machine-status-m1">
							<div id="machine-error-status-m1" class="machine-error-status"></div>
							<img id="machine-error-image-m1" src="" >
							<div id="machine-error-metric-m1" class="machine-error-metric"></div>
							<div id="machine-error-message-m1" class="machine-error-message" style="font-size:8.5px"></div>
							<div id="machine-error-value-m1" class="machine-error-value" style="font-size:18px"></div>
							<div id="machine-error-date-m1" class="machine-error-date"></div>
						</div>
					</div>
				</div>

	            <!-- ###########################################
	            ################# DIBUJO MÁQUINA ############### -->
	            <div class="col-md-4" style="margin-left:-100px;padding-top:40px">
	                <div class="modal-content" style="background-color:#F1F1F1;height: 150px!important; width:150px">
	                    <img src="../images/estarta.png" style="padding-top:30px;padding-left:15px;width:90%">
	                </div>
	            </div>

	            <!-- ###########################################
	            ################## INDICADORES ################# -->
	            <div class="col-md-5" style="margin-left:-195px">
	                <div class="modal-content" style="background-color:#F1F1F1;height: 230px !important;width:750px">
	                    <div class="modal-header">
	                        <h4 class="modal-title">ESTARTA 315 FV Centreless grinding - Kelly</h4>
	                    </div>
	                    <div class="modal-body">
	                        <div class="modal-izq">
								Z1 Axis Temperature:<br>
								<div id="z1-temperature-bar-m1"></div>
								Z2 Axis Temperature:<br>
								<div id="z2-temperature-bar-m1"></div>
	                            Z1 Axis Engine Intensity:<br>
	                            <div id="z1-intensity-bar-m1"></div>
	                            Z2 Axis Engine Intensity:<br>
	                            <div id="z2-intensity-bar-m1"></div>
	                        </div>
	                        <div class="modal-dere">
								Controller Mode:<br>
								<div id="controller-mode-m1" class="indicator-right"></div>
	                            Execution State:<br>
								<div id="execution-state-m1" class="indicator-right"></div>
	                            Program Name:<br>
								<div id="program-name-m1" class="indicator-right"></div>
	                        </div>
	                    </div>
	                </div>
	            </div>
	        </div>

	        <!--
			################################################################################
	        ################################  MACHINE 2 ####################################
			################################################################################
			-->
	        <div class="row" style="padding-top: 20px;margin-left:-120px">

	            <!-- ###########################################
	            #################### LOGO V/X ################## -->
	           <!-- <div class="col-md-3" style="padding-top:40px">
					<div class="modal-content" style="background-color:#66bb6a;height: 150px!important; width:150px">
	                    <img src="../images/v.png" style="padding-left:30px;padding-top:35px;width:80%">
	                </div>
	            </div>-->
				<!-- ###########################################
				#################### LOGO V/X ################## -->
				<div class="col-md-3" style="padding-top:40px">
					<div class="modal-content" style="height: 150px!important; width:150px;background-color:#F1F1F1">
						<div id="machine-status-m2">
							<div id="machine-error-status-m2" class="machine-error-status"></div>
							<img id="machine-error-image-m2" src="" >
							<div id="machine-error-metric-m2" class="machine-error-metric"></div>
							<div id="machine-error-message-m2" class="machine-error-message" style="font-size:8.5px"></div>
							<div id="machine-error-value-m2" class="machine-error-value" style="font-size:18px"></div>
							<div id="machine-error-date-m2" class="machine-error-date"></div>
						</div>
					</div>
				</div>

	            <!-- ###########################################
	            ################# DIBUJO MÁQUINA ############### -->
	            <div class="col-md-4" style="margin-left:-100px;padding-top:40px">
		                <div class="modal-content" style="background-color:#F1F1F1;height: 150px!important; width:150px">
		                 	<img src="../images/estarta.png" style="padding-top:30px;padding-left:15px;width:90%">
		                </div>
	            </div>

	            <!-- ###########################################
	            ################## INDICADORES ################# -->
	            <div class="col-md-5" style="margin-left:-195px">
	                <div class="modal-content" style="background-color:#F1F1F1;height: 230px !important;width:750px">
	                    <div class="modal-header">
	                        <h4 class="modal-title">ESTARTA 315 FV Centreless grinding - Slater</h4>
	                    </div>
	                    <div class="modal-body">
	                        <div class="modal-izq">
								Z1 Axis Temperature:<br>
								<div id="z1-temperature-bar-m2"></div>
								Z2 Axis Temperature:<br>
								<div id="z2-temperature-bar-m2"></div>
								Z1 Axis Engine Intensity:<br>
								<div id="z1-intensity-bar-m2"></div>
								Z2 Axis Engine Intensity:<br>
								<div id="z2-intensity-bar-m2"></div>
	                        </div>
	                        <div class="modal-dere">
								Controller Mode:<br>
								<div id="controller-mode-m2" class="indicator-right"></div>
	                            Execution State:<br>
								<div id="execution-state-m2" class="indicator-right"></div>
	                            Program Name:<br>
								<div id="program-name-m2" class="indicator-right"></div>
	                        </div>
	                    </div>
	                </div>
	            </div>
	        </div>

	        <!--
			################################################################################
	        ################################  MACHINE 3 ####################################
			################################################################################
			-->
	        <div class="row" style="padding-top: 20px;margin-left:-120px">

	            <!-- ###########################################
	            #################### LOGO V/X ################## -->
	            <div class="col-md-3" style="padding-top:40px">
	                <div class="modal-content" style="height: 150px!important; width:150px;background-color:#F1F1F1">
						<div id="machine-status-m3">
							<div id="machine-error-status-m3" class="machine-error-status"></div>
							<img id="machine-error-image-m3" src="" >
							<div id="machine-error-metric-m3" class="machine-error-metric"></div>
							<div id="machine-error-message-m3" class="machine-error-message" style="font-size:8.5px"></div>
							<div id="machine-error-value-m3" class="machine-error-value" style="font-size:18px"></div>
							<div id="machine-error-date-m3" class="machine-error-date"></div>
						</div>
	                </div>
	            </div>

	            <!-- ###########################################
	            ################# DIBUJO MÁQUINA ############### -->
	            <div class="col-md-4" style="margin-left:-100px;padding-top:40px">
	                <div class="modal-content" style="background-color:#F1F1F1;height: 150px!important; width:150px">
	                  <img src="../images/estarta.png" style="padding-top:30px;padding-left:15px;width:90%">
	                </div>
	            </div>

	            <!-- ###########################################
	            ################## INDICADORES ################# -->
	            <div class="col-md-5" style="margin-left:-195px">
	                <div class="modal-content" style="background-color:#F1F1F1;height: 230px !important;width:750px">
	                    <div class="modal-header">
	                        <h4 class="modal-title">ESTARTA 315 FV Centreless grinding - Zack</h4>
	                    </div>
	                    <div class="modal-body">
	                        <div class="modal-izq">
								Z1 Axis Temperature:<br>
								<div id="z1-temperature-bar-m3"></div>
								Z2 Axis Temperature:<br>
								<div id="z2-temperature-bar-m3"></div>
								Z1 Axis Engine Intensity:<br>
								<div id="z1-intensity-bar-m3"></div>
								Z2 Axis Engine Intensity:<br>
								<div id="z2-intensity-bar-m3"></div>
	                        </div>
	                        <div class="modal-dere">
	                            Controller Mode:<br>
								<div id="controller-mode-m3" class="indicator-right"></div>
	                            Execution State:<br>
								<div id="execution-state-m3" class="indicator-right"></div>
	                            Program Name:<br>
								<div id="program-name-m3" class="indicator-right"></div>
	                        </div>
	                    </div>
	                </div>
	            </div>
	        </div>
	    </div>

	    <a href="mailto:sat@ideko.es" class="float-button">
	      <i class="fa fa-plus my-float glyphicon glyphicon-envelope"></i>
	    </a>

	    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
	    <script src="../js/config.js"></script>
	    <script src="../js/highcharts/highcharts.js"></script>
	    <script src="../js/highcharts/highcharts-more.js"></script>
	    <script src="../js/highcharts/charts/app2-bars.js"></script>
	    <script src="../js/diagnostic/diagnostic.js"></script>
		<script src="../js/stream/stream.js"></script>
		<script src="../js/stream/stream-controller.js"></script>
		<script src="../js/diagnostic/diagnostic.js"></script>
		<script src="../js/diagnostic/diagnostic-controller.js"></script>
		<script src="../js/login/check-local-storage.js"></script>
		<script src="../js/login/logout.js"></script>

		<script>
			$(window).ready(function()
			{
/*
				// Kelly (1) - GetStreamingData
				urlStream = AppConfiguration.GetStreamingDataURL + "?machine=" + AppConfiguration.machineIds.Kelly;
				console.log("Starting stream for Kelly (1)");
				StreamController.startStreaming(urlStream);

				// Slater (2) - GetStreamingData
				urlStream = AppConfiguration.GetStreamingDataURL + "?machine=" + AppConfiguration.machineIds.Slater;
				console.log("Starting stream for Slater (2)");
				StreamController.startStreaming(urlStream);
*/
				// Zack (3) - GetStreamingData
				urlStream = AppConfiguration.GetStreamingDataURL + "?machine=" + AppConfiguration.machineIds.Zack;
				console.log("Starting stream for Zack (3)");
				StreamController.startStreaming(urlStream);

				setInterval(function() {
					console.log("Calling CAF every " + AppConfiguration.CallAndPrintDiagnosticValuesInterval + " ms (" + AppConfiguration.CallAndPrintDiagnosticValuesInterval/1000 + " sec) to get status of each machine. Actual time: " + new Date(Date.now()).toLocaleTimeString());
/*
					// Kelly (1) - GetSimplifiedDiagnostic
					urlSimplifiedDiagnostic = AppConfiguration.GetSimplifiedDiagnosticURL + "?machines=" + AppConfiguration.machineIds.Kelly;
					DiagnosticController.startDiagnosticCall(urlSimplifiedDiagnostic, "Kelly");

					// Slater (2) - GetSimplifiedDiagnostic
					urlSimplifiedDiagnostic = AppConfiguration.GetSimplifiedDiagnosticURL + "?machines=" + AppConfiguration.machineIds.Slater;
					DiagnosticController.startDiagnosticCall(urlSimplifiedDiagnostic, "Slater");
*/
					// Zack (3) - GetSimplifiedDiagnostic
					urlSimplifiedDiagnostic = AppConfiguration.GetSimplifiedDiagnosticURL + "?machines=" + AppConfiguration.machineIds.Zack;
					DiagnosticController.startDiagnosticCall(urlSimplifiedDiagnostic, "Zack");
				}, AppConfiguration.CallAndPrintDiagnosticValuesInterval);
			});
		</script>
	</div>
  </body>
